<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Events | Coding Club PRPCEM</title>
  <meta name="description" content="Discover upcoming workshops, hackathons, tech talks, and coding competitions organized by Coding Club PRPCEM. Join us to learn, network, and grow." />
  <link rel="icon" href="images/logo1.png" type="image/png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/mobile-style.css" />
  <link rel="stylesheet" href="css/navbar.css" />
  <link rel="stylesheet" href="css/enhanced-styles.css" />
</head>
<body>
  <div class="particle-bg" id="particle-bg"></div>

  <!-- Simple Modern Navigation -->
  <nav class="navbar">
    <div class="navbar-container">
      <!-- Logo Section -->
      <div class="navbar-brand">
        <img src="images/logo1.png" alt="Coding Club PRPCEM" class="navbar-logo" />
        <div class="navbar-text">
          <span class="navbar-title">CODING CLUB</span>
          <span class="navbar-subtitle">PRPCEM</span>
        </div>
      </div>
      
      <!-- Desktop Navigation -->
      <div class="navbar-nav">
        <a href="index.html" class="nav-item">Home</a>
        <a href="about.html" class="nav-item">About</a>
        <a href="events.html" class="nav-item active">Events</a>
        <a href="posts.html" class="nav-item">Technical Posts & Blogs</a>
        <a href="team.html" class="nav-item">Team</a>
        <a href="contact.html" class="nav-item">Contact</a>
      </div>
      
      <!-- Right Side -->
      <div class="navbar-actions">
        <div class="navbar-social">
          <a href="https://github.com/CodingClubPRPCEM" target="_blank" aria-label="GitHub">
            <i class="fab fa-github"></i>
          </a>
          <a href="https://linkedin.com/company/coding-club-prpcem" target="_blank" aria-label="LinkedIn">
            <i class="fab fa-linkedin"></i>
          </a>
        </div>
        <a href="hackathon/hackathon26-coming-soon.html" class="join-button">Hackathon 26</a>
        
        <!-- Mobile Menu Button -->
        <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
    
    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
      <div class="mobile-nav">
        <a href="index.html" class="mobile-nav-item">Home</a>
        <a href="about.html" class="mobile-nav-item">About</a>
        <a href="events.html" class="mobile-nav-item">Events</a>
        <a href="posts.html" class="mobile-nav-item">Technical Posts & Blogs</a>
        <a href="team.html" class="mobile-nav-item">Team</a>
        <a href="contact.html" class="mobile-nav-item">Contact</a>
      </div>
      <div class="mobile-actions">
        <div class="mobile-social">
          <a href="https://github.com/CodingClubPRPCEM" target="_blank" aria-label="GitHub">
            <i class="fab fa-github"></i>
          </a>
          <a href="https://linkedin.com/company/coding-club-prpcem" target="_blank" aria-label="LinkedIn">
            <i class="fab fa-linkedin"></i>
          </a>
        </div>
        <button class="mobile-join-button" onclick="openJoinModal()">Join Our Community</button>
      </div>
    </div>
  </nav>

  <!-- Page Header -->
  <header class="page-header">
    <div class="header-container">
      <div class="header-content">
        <div class="breadcrumb">
          <span class="breadcrumb-item">
            <i class="fas fa-home"></i>
            <a href="index.html">Home</a>
          </span>
          <span class="breadcrumb-separator">
            <i class="fas fa-chevron-right"></i>
          </span>
          <span class="breadcrumb-item active">
            <i class="fas fa-calendar-alt"></i>
            Events
          </span>
        </div>
        
        <h1 class="page-title">
          <span class="title-accent">&lt;</span>
          Our <span class="title-gradient">Events</span>
          <span class="title-accent">/&gt;</span>
        </h1>
        
        <p class="page-subtitle max-w-2xl">
          Join us for workshops, hackathons, tech talks, and competitions that will elevate your coding journey
        </p>
      </div>
      
      <div class="header-visual">
        <div class="events-network-visual" id="eventsNetwork"></div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">

    <!-- Event Navigation -->
    <section class="event-nav-section py-8">
      <div class="section-container max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="event-nav-tabs flex justify-center gap-4">
          <button class="event-nav-tab active px-4 py-2 sm:px-6 sm:py-3" onclick="switchEventTab('upcoming')">
            <i class="fas fa-clock"></i>
            <span>Upcoming Events</span>
          </button>
          <button class="event-nav-tab px-4 py-2 sm:px-6 sm:py-3" onclick="switchEventTab('past')">
            <i class="fas fa-history"></i>
            <span>Past Events</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Upcoming Events -->
    <section id="upcoming-events" class="about-section event-section pt-4 pb-12" data-tab="upcoming">
      <div class="section-container max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="events-grid" id="upcomingEventsGrid">
          <!-- Dynamic events will be loaded here -->
          <div class="loading-events" id="eventsLoading">
            <i class="fas fa-spinner fa-spin"></i>
            <span>Loading upcoming events...</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Past Events -->
    <section id="past-events" class="about-section event-section pt-4 pb-12" data-tab="past" style="display: none;">
      <div class="section-container max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="events-grid" id="pastEventsGrid">
          <!-- Dynamic past events will be loaded here -->
        </div>
      </div>
    </section>



    <!-- Newsletter Signup -->
    <section id="newsletter" class="about-section py-12">
      <div class="section-container max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="newsletter-card">
          <div class="newsletter-content">
            <div class="newsletter-icon">
              <i class="fas fa-bell"></i>
            </div>
            <h3>Never Miss an Event</h3>
            <p>Subscribe to our newsletter and get notified about upcoming events, workshops, and competitions.</p>
            
            <form class="newsletter-form" id="newsletterForm">
              <div class="form-group">
                <input type="email" id="newsletter-email" name="email" required placeholder="Enter your email">
                <button type="submit" class="btn-primary">
                  <i class="fas fa-paper-plane"></i>
                  <span>Subscribe</span>
                </button>
              </div>
            </form>
            
            <div class="newsletter-benefits">
              <div class="benefit-item">
                <i class="fas fa-check"></i>
                <span>Early event notifications</span>
              </div>
              <div class="benefit-item">
                <i class="fas fa-check"></i>
                <span>Exclusive member content</span>
              </div>
              <div class="benefit-item">
                <i class="fas fa-check"></i>
                <span>Priority registration</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Enhanced Footer -->
  <footer class="footer-section simple-footer">
    <div class="footer-container">
      <div class="footer-main">
        <div class="footer-column footer-brand">
          <div class="footer-logo-section">
            <img src="images/logo1.png" alt="Coding Club PRPCEM" class="footer-logo" />
            <span class="footer-title">Coding Club PRPCEM</span>
          </div>
          <p class="footer-desc">
            A community of passionate students learning, building, and growing together through the power of technology.
          </p>
          <div class="footer-social">
            <a href="https://github.com/CodingClubPRPCEM" target="_blank" aria-label="GitHub">
              <i class="fab fa-github"></i>
            </a>
            <a href="https://www.linkedin.com/company/coding-club-prpcem/" target="_blank" aria-label="LinkedIn">
              <i class="fab fa-linkedin"></i>
            </a>
            <a href="https://www.instagram.com/codingclub_prpcem" target="_blank" aria-label="Instagram">
              <i class="fab fa-instagram"></i>
            </a>
          </div>
        </div>
        
        <div class="footer-column footer-links">
          <h4 class="footer-column-title">Quick Links</h4>
          <nav class="footer-nav-list">
            <a href="index.html">Home</a>
            <a href="about.html">About Us</a>
            <a href="events.html">Events</a>
            <a href="posts.html">Technical Posts & Blogs</a>
          </nav>
        </div>
        
        <div class="footer-column footer-community">
          <h4 class="footer-column-title">Community</h4>
          <nav class="footer-nav-list">
            <a href="team.html">Meet the Team</a>
            <a href="contact.html">Contact Us</a>
            <a href="hackathon26.html">Hackathon 26</a>
            <a href="https://chat.whatsapp.com/El4P6t9tCVC7e1hRooKENB" target="_blank">WhatsApp Group</a>
          </nav>
        </div>
        
        <div class="footer-column footer-contact">
          <h4 class="footer-column-title">Get In Touch</h4>
          <div class="footer-contact-info">
            <div class="contact-item">
              <i class="fas fa-envelope"></i>
              <span>coding_club@prpotepatilengg.ac.in</span>
            </div>
            <div class="contact-item">
              <i class="fas fa-map-marker-alt"></i>
              <span>PRPCEM, Amravati</span>
            </div>
            <div class="contact-item">
              <i class="fas fa-clock"></i>
              <span>Mon - Fri: 9AM - 6PM</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="footer-bottom-simple">
        <span>&copy; 2025 Coding Club PRPCEM. All rights reserved.</span>
        <span class="footer-made-with">Made with <i class="fas fa-heart"></i> by our amazing community</span>
      </div>
    </div>
    <!-- Footer Background Effects -->
    <div class="footer-bg-effects">
      <div class="footer-particles"></div>
      <div class="footer-grid"></div>
    </div>
  </footer>

  <!-- Join Modal -->
  <div class="modal-overlay" id="joinModal">
    <div class="modal-container">
      <div class="modal-header">
        <h2>Join Our Amazing Community!</h2>
        <button class="modal-close" onclick="closeJoinModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form class="join-form" id="joinForm">
          <div class="form-group">
            <input type="text" id="joinName" required>
            <label for="joinName">Full Name</label>
          </div>
          
          <div class="form-group">
            <input type="email" id="joinEmail" required>
            <label for="joinEmail">Email Address</label>
          </div>
          
          <div class="form-group">
            <input type="text" id="joinPhone" required>
            <label for="joinPhone">Phone Number</label>
          </div>
          
          <div class="form-group">
            <select id="joinYear" required>
              <option value="">Select Year</option>
              <option value="1">First Year</option>
              <option value="2">Second Year</option>
              <option value="3">Third Year</option>
              <option value="4">Final Year</option>
            </select>
            <label for="joinYear">Academic Year</label>
          </div>
          
          <div class="form-group">
            <select id="joinBranch" required>
              <option value="">Select Branch</option>
              <option value="cse">Computer Science</option>
              <option value="it">Information Technology</option>
              <option value="ece">Electronics & Communication</option>
              <option value="me">Mechanical Engineering</option>
              <option value="ce">Civil Engineering</option>
              <option value="other">Other</option>
            </select>
            <label for="joinBranch">Branch</label>
          </div>
          
          <div class="form-group">
            <textarea id="joinInterests" required></textarea>
            <label for="joinInterests">What excites you about coding? Any specific goals?</label>
          </div>
          
          <button type="submit" class="submit-btn">
            <span>Join the Community!</span>
            <i class="fas fa-rocket"></i>
          </button>
        </form>
      </div>
    </div>
  </div>

  <script src="js/animations.js"></script>
  <script src="js/mobile-app.js"></script>
  
  <style>
    /* Loading and Error States */
    .loading-events {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 4rem 2rem;
      text-align: center;
      color: #00d4ff;
      grid-column: 1 / -1;
    }
    
    .loading-events i {
      font-size: 2rem;
      margin-bottom: 1rem;
      animation: spin 1s linear infinite;
    }
    
    .no-events-message, .error-message {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 4rem 2rem;
      text-align: center;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      backdrop-filter: blur(20px);
      margin: 2rem auto;
      max-width: 500px;
      grid-column: 1 / -1;
    }
    
    .no-events-message i, .error-message i {
      font-size: 2.5rem;
      color: #00d4ff;
      margin-bottom: 1rem;
    }
    
    .no-events-message h3, .error-message h3 {
      color: #ffffff;
      margin-bottom: 0.5rem;
      font-size: 1.5rem;
    }
    
    .no-events-message p, .error-message p {
      color: #a0a0a0;
      margin: 0;
    }
    
    /* Event Card Enhancements */
    .event-card {
      transition: all 0.3s ease;
      height: fit-content;
    }
    
    .event-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 212, 255, 0.15);
    }
    
    .event-card .event-title {
      font-size: 1.25rem !important;
      font-weight: 700 !important;
      line-height: 1.3 !important;
      margin-bottom: 0.75rem !important;
    }
    
    .event-card .event-description {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
      line-height: 1.5;
      margin-bottom: 1rem;
    }
    
    .event-card .event-image img {
      aspect-ratio: 16/9;
      object-fit: cover;
    }
    
    .event-card .detail-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .event-card .detail-item i {
      margin-top: 2px;
    }
    
    /* Mobile Optimizations */
    @media (max-width: 768px) {
      .event-nav-tabs {
        gap: 0.75rem !important;
      }
      
      .event-nav-tab {
        font-size: 0.875rem;
        padding: 0.5rem 1rem !important;
      }
      
      .events-grid {
        gap: 1.25rem;
      }
      
      .event-card {
        margin-bottom: 0;
      }
      
      .event-card .event-image img {
        height: 180px;
      }
      
      .newsletter-card {
        margin-top: 1.5rem;
      }
    }
    
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
  
  <!-- Events Page Specific Scripts -->
  <script>
    // Events Network Visual
    function initEventsNetworkVisual() {
      const container = document.getElementById('eventsNetwork');
      if (!container) return;

      const nodes = [
        { id: 'workshop', x: 20, y: 30, type: 'fas fa-tools' },
        { id: 'hackathon', x: 80, y: 25, type: 'fas fa-code' },
        { id: 'competition', x: 70, y: 70, type: 'fas fa-trophy' },
        { id: 'talk', x: 30, y: 75, type: 'fas fa-microphone' },
        { id: 'networking', x: 50, y: 50, type: 'fas fa-users' },
        { id: 'learning', x: 60, y: 20, type: 'fas fa-graduation-cap' }
      ];

      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      svg.setAttribute('width', '100%');
      svg.setAttribute('height', '300');
      svg.setAttribute('viewBox', '0 0 100 100');
      svg.style.position = 'absolute';
      svg.style.top = '0';
      svg.style.left = '0';
      svg.style.zIndex = '1';

      const connections = [
        ['workshop', 'networking'], ['hackathon', 'workshop'], ['competition', 'hackathon'],
        ['talk', 'competition'], ['learning', 'talk'], ['networking', 'learning']
      ];

      connections.forEach(([from, to]) => {
        const fromNode = nodes.find(n => n.id === from);
        const toNode = nodes.find(n => n.id === to);
        
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('x1', fromNode.x);
        line.setAttribute('y1', fromNode.y);
        line.setAttribute('x2', toNode.x);
        line.setAttribute('y2', toNode.y);
        line.setAttribute('stroke', 'rgba(0, 212, 255, 0.3)');
        line.setAttribute('stroke-width', '0.5');
        line.style.animation = `pulse 2s ease-in-out infinite ${Math.random() * 1}s`;
        
        svg.appendChild(line);
      });

      nodes.forEach((node, index) => {
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('cx', node.x);
        circle.setAttribute('cy', node.y);
        circle.setAttribute('r', '2');
        circle.setAttribute('fill', '#00d4ff');
        circle.style.animation = `glow 3s ease-in-out infinite ${index * 0.4}s`;
        
        svg.appendChild(circle);
      });

      container.appendChild(svg);

      nodes.forEach((node, index) => {
        const icon = document.createElement('div');
        icon.innerHTML = `<i class="${node.type}"></i>`;
        icon.style.position = 'absolute';
        icon.style.left = `${node.x}%`;
        icon.style.top = `${node.y}%`;
        icon.style.transform = 'translate(-50%, -50%)';
        icon.style.color = '#00d4ff';
        icon.style.fontSize = '14px';
        icon.style.zIndex = '2';
        icon.style.animation = `float 4s ease-in-out infinite ${index * 0.6}s`;
        
        container.appendChild(icon);
      });
    }

    // Tab switching functionality
    function switchEventTab(tabType) {
      // Hide all event sections
      const eventSections = document.querySelectorAll('.event-section');
      eventSections.forEach(section => {
        section.style.display = 'none';
      });
      
      // Show selected section with fade in effect
      const targetSection = document.querySelector(`[data-tab="${tabType}"]`);
      if (targetSection) {
        targetSection.style.display = 'block';
        // Trigger reflow to ensure the animation works
        void targetSection.offsetWidth;
      }
      
      // Update active tab
      const tabs = document.querySelectorAll('.event-nav-tab');
      tabs.forEach(tab => tab.classList.remove('active'));
      
      // Activate the correct tab based on tabType
      if (tabType === 'upcoming') {
        tabs[0].classList.add('active');
      } else if (tabType === 'past') {
        tabs[1].classList.add('active');
      }
    }

    // Newsletter form handler
    function initNewsletterForm() {
      const form = document.getElementById('newsletterForm');
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = document.getElementById('newsletter-email').value;
        const submitBtn = form.querySelector('button[type="submit"]');
        
        // Show loading state
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Subscribing...';
        submitBtn.disabled = true;
        
        // Simulate API call
        setTimeout(() => {
          alert('Thank you for subscribing! You\'ll receive notifications about upcoming events.');
          form.reset();
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }, 1500);
      });
    }

    async function loadEvents() {
      const upcomingGrid = document.getElementById("upcomingEventsGrid");
      const pastGrid = document.getElementById("pastEventsGrid");
      const loading = document.getElementById("eventsLoading");

      try {
const apiUrl = "https://events-edge.coding-club.workers.dev/api/events?populate=*";

        const res = await fetch(apiUrl);
        const events = await res.json();

        const eventList = Array.isArray(events) ? events : events.data;
        console.log("Fetched Events:", eventList);

        if (loading) loading.remove();
        upcomingGrid.innerHTML = "";
        pastGrid.innerHTML = "";

        const upcomingEvents = eventList.filter(
          e => e.statuss?.toLowerCase() === "upcoming"
        );

        const pastEvents = eventList.filter(
          e => e.statuss?.toLowerCase() === "completed"
        );

        renderEvents(upcomingEvents, upcomingGrid, "Upcoming");
        renderEvents(pastEvents, pastGrid, "Completed");

        if (!upcomingEvents.length) {
          upcomingGrid.innerHTML = `
            <div class="no-events-message">
              <i class="fas fa-calendar-plus"></i>
              <h3>No upcoming events</h3>
              <p>Stay tuned for announcements!</p>
            </div>`;
        }

        if (!pastEvents.length) {
          pastGrid.innerHTML = `
            <div class="no-events-message">
              <i class="fas fa-calendar-plus"></i>
              <h3>ðŸŽ‰ No Past Events Yet</h3>
              <p>Stay tuned for exciting events coming soon!</p>
            </div>`;
        }

      } catch (error) {
        console.error("Error loading events:", error);

        if (loading) loading.remove();
        upcomingGrid.innerHTML = `
          <div class="error-message">
            <i class="fas fa-exclamation-triangle"></i>
            <h3>Failed to fetch events</h3>
          </div>`;
      }
    }

    function renderEvents(events, container, statusLabel) {
      events.forEach(event => {
        const imgUrl = event.gallery?.[0]?.url || "images/events.png";
        const dateObj = new Date(event.date);
        const day = dateObj.getDate();
        const month = dateObj.toLocaleString("en-US", { month: "short" });
        
        // Truncate description to reasonable length
        const description = event.subtitle || "";
        const truncatedDesc = description.length > 80 ? description.substring(0, 80) + "..." : description;

        container.innerHTML += `
          <div class="event-card ${event.statuss} transition-all duration-300 hover:transform hover:-translate-y-1">
            <div class="event-image">
              <img src="${imgUrl}" alt="${event.title}"
                style="width:100%; height:200px; object-fit:cover; border-radius:12px; aspect-ratio: 16/9;" 
                loading="lazy" />
              <div class="event-status-badge ${event.statuss}">
                ${statusLabel}
              </div>
              <div class="event-date-badge">
                <span class="day">${day}</span>
                <span class="month">${month}</span>
              </div>
            </div>
            <div class="event-content">
              <div class="event-meta">
                <span class="event-time">
                  <i class="fas fa-clock"></i>
                  ${event.time || "TBD"}
                </span>
              </div>
              <h3 class="event-title font-bold text-lg leading-tight mb-3">${event.title}</h3>
              <p class="event-description text-sm leading-relaxed mb-4 line-clamp-2">${truncatedDesc}</p>
              <div class="event-details mb-4">
                <div class="detail-item flex items-center gap-2">
                  <i class="fas fa-map-marker-alt text-blue-400 mt-0.5"></i>
                  <span class="text-sm">${event.location || "PRPCEM Campus"}</span>
                </div>
              </div>
              <div class="event-actions">
                <a href="event-detail.html?id=${event.id}" class="btn-primary inline-flex items-center gap-2 px-4 py-2 rounded-lg transition-all hover:scale-105">
                  <i class="fas fa-eye"></i>
                  <span>View Details</span>
                </a>
              </div>
            </div>
          </div>`;
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      initEventsNetworkVisual();
      initNewsletterForm();
      switchEventTab("upcoming");
      loadEvents();
    });
  </script>
</body>
</html>